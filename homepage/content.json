{"meta":{"title":"Adeptmicors279的blog","subtitle":"","description":"","author":null,"url":"https://adeptmicors279-github-io.pages.dev/homepage","root":"/homepage/"},"pages":[],"posts":[{"title":"Python写一个音乐播放器","slug":"Python写一个音乐播放器","date":"2024-04-13T17:03:17.000Z","updated":"2024-04-14T01:31:35.329Z","comments":true,"path":"2024/04/14/Python写一个音乐播放器/","permalink":"https://adeptmicors279-github-io.pages.dev/homepage/2024/04/14/Python%E5%86%99%E4%B8%80%E4%B8%AA%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/","excerpt":"本来想把之前OCR重写UI再端上来的说但是马上就期中了，所以就把之前的音乐播放器拿出来给大家看看吧","text":"本来想把之前OCR重写UI再端上来的说但是马上就期中了，所以就把之前的音乐播放器拿出来给大家看看吧 Python 库的导入1234567import tkinterfrom tkinter import *from tkinter import filedialogfrom tkinter import messageboxfrom tkinter import ttkimport os.pathimport pygame 这里用的是tkinter图形库，pygame来做播放音乐的模块，os.path检测文件是否存在 初始化列表12music_show=[]music_list=[] 这两个列表，music_list来储存音乐路径，music_show来储存显示的歌曲名字 检测文件是否存在123456789101112131415if os.path.exists(&#x27;song.txt&#x27;): with open(&#x27;song.txt&#x27;,&#x27;r&#x27;)as rf: content=rf.readlines() # 读取所有行 for i in content: i=str(i).replace(&#x27;\\n&#x27;,&#x27;&#x27;) music_list.append(i) print (content) print (music_list) for item in music_list: filename=os.path.basename(item) music_show.append(filename)else: file_path = None music_list=[] music_show=[] 检测文件是否存在，并替换其中的换行符储存到music_list中如果不存在就初始化变量 注意这边要写readlines不然会把所有的一个个字母拆分下来储存到列表中去按照我写代码的习惯，我喜欢先空出地方，把UI放在后面，先写UI。但是想了想发现写博客不易看懂，所以提前到这里1234567891011121314151617181920212223242526def root(): global musiclist root=tkinter.Tk() root.geometry(&#x27;1035x715&#x27;) root.title(&#x27;音乐播放器&#x27;) information=Label(root,text=&#x27;音乐播放器&#x27;,font=(&#x27;微软雅黑&#x27;,20)) information.place(relx=0.0772946859903382,rely=0.0839160839160839) musiclist=Listbox(root,width=130,height=30) musiclist.place(relx=0.0772946859903382,rely=0.1398601398601399,relwidth=0.8,relheight=0.741958041958042) gun=Scrollbar(musiclist,orient=VERTICAL,width=20) gun.pack(side=tkinter.RIGHT, fill=tkinter.Y) addmusic=Button(root,text=&#x27;添加音乐&#x27;,font=(&#x27;微软雅黑&#x27;,10),command=add) addmusic.place(relx=0.0966183574879227,rely=0.9230769230769231,relheight=0.0559440559440559,relwidth=0.0676328502415459) playmusic=Button(root,text=&#x27;开始播放&#x27;,font=(&#x27;微软雅黑&#x27;,10),command=play) playmusic.place(relx=0.21256038647343,rely=0.9230769230769231,relheight=0.0559440559440559,relwidth=0.0676328502415459) stopmusic=Button(root,text=&#x27;停止&#x27;,font=(&#x27;微软雅黑&#x27;,10),command=stop) stopmusic.place(relx=0.3285024154589372,rely=0.9230769230769231,relheight=0.0559440559440559,relwidth=0.0676328502415459) deletmusci=Button(root,text=&#x27;删除&#x27;,font=(&#x27;微软雅黑&#x27;,10),command=delet) deletmusci.place(relx=0.4444444444444444,rely=0.9230769230769231,relheight=0.0559440559440559,relwidth=0.0676328502415459) continuemusic=Button(root,text=&#x27;继续播放&#x27;,font=(&#x27;微软雅黑&#x27;,10),command=continueplay) continuemusic.place(relx=0.5603864734299517,rely=0.9230769230769231,relheight=0.0559440559440559,relwidth=0.0676328502415459) loud=Button(root,text=&#x27;音量&#x27;,font=(&#x27;微软雅黑&#x27;,10),command=voice) loud.place(relx=0.6763285024154589,rely=0.9230769230769231,relheight=0.0559440559440559,relwidth=0.0676328502415459) for i in music_show: musiclist.insert(tkinter.END,i) root.mainloop() 添加UI，没什么东西我用的是相对坐标，比值算的比较细（就细了那么亿点）应该能看得懂吧字体我是随便选的，不过我还是觉得苹果的苹方看着舒服 添加音乐1234567891011121314151617def add(): file_types = [(&#x27;Audio&#x27;, &#x27;*.mp3&#x27;),(&#x27;Audio&#x27;, &#x27;*.wav&#x27;),(&#x27;Audio&#x27;, &#x27;*.ogg&#x27;)] file_path = filedialog.askopenfilename(filetypes=file_types) #music_list.append(file_path) if file_path: music_list.append(file_path) with open(&#x27;song.txt&#x27;,&#x27;w&#x27;,encoding=&#x27;utf-8&#x27;)as f: for i in music_list: i=i+&#x27;\\n&#x27; f.write(i) for item in music_list: filename=os.path.basename(item) music_show=[] music_show.append(filename) for i in music_show: musiclist.insert(tkinter.END,i) 先调用tkinter的文件选择，并限定格式，防止选中一些奇奇怪怪的东西进去（什么？你问我为什么就这三种格式？想要别的格式可以pydub，可惜我不会用ffmpeg所以不多阐述）然后将路径添加至music_list并IO写入文件保存下来（我为了省事直接txt了，感兴趣的可以json） filename&#x3D;os.path.basename(item) 分离文件名和路径并存入music_show，待会用于展示删除123456789101112131415161718192021222324def delet(): global index if musiclist.curselection(): # 检查是否有选中的条目 index = musiclist.curselection()[0] del music_list[index] #print (music_list) with open(&#x27;song.txt&#x27;,&#x27;w&#x27;,encoding=&#x27;utf-8&#x27;)as f: for i in music_list: i=i+&#x27;\\n&#x27; f.write(i) music_show=[] for item in music_list: filename=os.path.basename(item) music_show.append(filename) #print (music_show) musiclist.delete(0, tkinter.END) try: for i in music_show: musiclist.insert(tkinter.END, i) except: musiclist.delete(0, tkinter.END) else: messagebox.showinfo(&quot;提示&quot;, &quot;请先选择一首音乐。&quot;) 首先，获取选中Listbox的条目的索引然后删除对应索引的元素 注意：当列表中只剩下一个元素又被删干净之后，list列表内无元素，无法写入show列表，所以try except排异删除完记得重写覆写文件 播放音乐（终于能听个响了）123456789101112def play(): global current_music,sign,index pygame.mixer.init() pygame.mixer.music.stop() if musiclist.curselection(): # 检查是否有选中的条目 index = musiclist.curselection()[0] sign=index pygame.mixer.init() pygame.mixer.music.load(music_list[index]) pygame.mixer.music.play(0) else: messagebox.showinfo(&quot;提示&quot;, &quot;请先选择一首音乐。&quot;) global声明全局变量，因为下面暂停播放和取消播放也要用到调用pygame模块，先停止所有音乐播放（防止冲突）再根据所选索引播放音乐如果没有选择，则messagebox提示 停止12def stop(): pygame.mixer.music.pause() 暂时暂停而不是取消播放，取消是stop 继续播放与普通的播放不同，这个是继续刚刚暂停的任务 12def continueplay(): pygame.mixer.music.unpause() 音量调整123456789101112def voice(): global setloud voice=Toplevel() voice.geometry(&#x27;170x300&#x27;) voice.title(&#x27;音量调整&#x27;) setloud = ttk.Scale(voice, from_=0, to=100, orient=&quot;horizontal&quot;,command=adjust_volume) setloud.pack()def adjust_volume(event): volume=setloud.get() / 100.0 # 将滑块值转换为0.0到1.0之间的音量值 pygame.mixer.init() pygame.mixer.music.set_volume(volume) # 设置声道的音量 先全局变量然后创建一个子窗口voice创建滑条并关联音量百分比 root()启动！","categories":[],"tags":[{"name":"技术","slug":"技术","permalink":"https://adeptmicors279-github-io.pages.dev/homepage/tags/%E6%8A%80%E6%9C%AF/"}]},{"title":"关于此站","slug":"关于本站","date":"2024-04-13T10:18:30.000Z","updated":"2024-04-13T10:37:07.139Z","comments":true,"path":"2024/04/13/关于本站/","permalink":"https://adeptmicors279-github-io.pages.dev/homepage/2024/04/13/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/","excerpt":"","text":"怎么说呢，其实就是临时起意搞得一个托管网站以后会往上面发发自己写的小项目之类的自己之前从来没在GitHub上发过什么，主要是因为写的东西GitHub上有更优的，发了没什么意义，以后就记录记录生活吧 本人会python当然也只会python，之前有过想学c搞单片机但是奈何时间不够就放弃了 让我想想我还能写些什么1$ print (&#x27;helloworld&#x27;) 第一次接触编程是在初中，当时python学一半半途而废了，后来高一寒假学的 托管网站的一些事儿当时搞了半天都搞不懂为什么GitHub的链接正常，但是cloud flare加载的就会只剩下html，后来发现hexo的配置文件链接填错了……","categories":[],"tags":[]}],"categories":[],"tags":[{"name":"技术","slug":"技术","permalink":"https://adeptmicors279-github-io.pages.dev/homepage/tags/%E6%8A%80%E6%9C%AF/"}]}